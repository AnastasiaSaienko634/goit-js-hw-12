{"version":3,"file":"index.js","sources":["../src/js/render-funktions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// // Описаний у документації\n// import SimpleLightbox from \"simplelightbox\";\n// // Додатковий імпорт стилів\n// import \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery-js');\n\nexport const galleryFn = ImgInfo => {\n    \n    return `<li class=\"card\">\n    <a class=\"lagre-foto\" href=\"${ImgInfo.largeImageURL}\">\n    <img class=\"photo\" src='${ImgInfo.webformatURL}' alt='${ImgInfo.tags}' width='360' height='160'>\n    </a>\n    <div class=\"text\">\n    <p class=\"tags\">Likes<span class=\"positions\">${ImgInfo.likes}</span></p>\n    <p class=\"views\">Views<span class=\"positions\">${ImgInfo.views}</span></p>\n    <p class=\"comments\">Comments<span class=\"positions\">${ImgInfo.comments}</span></p>\n    <p class=\"downloads\">Downloads<span class=\"positions\">${ImgInfo.downloads}</span></p>\n    </div>\n    </li>`\n};\n\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n  }\n\n// webformatURL,largeImageURL,tags,likes,views,comments,downloads","import axios from 'axios';\n// const ul = document.querySelector('.gallery-js');\n// const key = '47906574-737e3153d4e9e6f9b55134ae6';\n// const url = 'https://pixabay.com/api/';\n\n\n\n\n\nexport function fetchImages(searchQuery, currentPage){\n    const axiousParams = {\n        params: {\n            key: '47906574-737e3153d4e9e6f9b55134ae6',\n            q: searchQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: currentPage,\n        },\n    };\n     return axios.get('https://pixabay.com/api/',axiousParams);\n    }\n    \n\n\n","import axios from 'axios';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport iziToast from \"izitoast\";\nimport { galleryFn } from './js/render-funktions.js';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport {fetchImages} from './js/pixabay-api.js';\nconst form = document.querySelector('form');\nconst input = form.querySelector('.input-form');\nconst loader = document.querySelector('.loader');\nconst gallery =  document.querySelector('.gallery');\nconst ul = document.querySelector('.gallery-js');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet page = 1;\nlet searchQuery = '';\nlet totalHits = 0;\nloadMoreBtn.classList.add('is-hidden');\n\nconst generalFunktion = async (event) => {\n    loadMoreBtn.classList.add('is-hidden');\n\ntry {\n    event.preventDefault();\n    searchQuery = input.value.trim();\n    console.log(searchQuery);\n\n    if(searchQuery === '') {\n        iziToast.show({\n            message: 'Please fill in the field',\n            iconUrl: 'https://symbl-world.akamaized.net/i/webp/c1/d9d88630432cf61ad335df98ce37d6.webp',\n            messageSize: '16',\n            messageColor: 'white',\n            backgroundColor: '#EF4040',\n            position: 'topRight',\n            width: '302',\n            color: 'white',\n        });\n        gallery.innerHTML = '';\n        loader.classList.add('is-hidden');\n        loadMoreBtn.classList.add('is-hidden');\n        return;\n    }\n\n\n    loader.classList.remove('is-hidden');\n    loadMoreBtn.classList.add('is-hidden');\n    const response = await fetchImages(searchQuery,page);\n    totalHits = response.data.totalHits;\n    const markup = response.data.hits.map(el => galleryFn(el)).join('');\n    ul.innerHTML = markup;\n    loader.classList.add('is-hidden');\n\n      const simplebox = new SimpleLightbox('.gallery a', {\n                captionsData: \"alt\", // встановлює підпис\n                captionDelay: 250, // встановлює затримку\n                doubleTapZoom: 0, // вбирає зум з подвійним кліком\n                maxZoom: 0, // вбирає зум\n                scrollZoom: false, //вбирає скрол мишою\n            });\n            simplebox.refresh();\n            form.reset()\n\n    if(response.data.hits.length === 0){\n                loader.classList.add('is-hidden');\n                iziToast.show({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    iconUrl: 'https://symbl-world.akamaized.net/i/webp/c1/d9d88630432cf61ad335df98ce37d6.webp',\n                    messageSize: '16',\n                    messageColor: 'white',\n                    backgroundColor: '#EF4040',\n                    position: 'topRight',\n                    width: '302',\n                    color: 'white',\n                });\n                gallery.innerHTML = '';\n                form.reset();\n                return;\n            }\n\n           \n            if(response.data.totalHits > 1){\n                loadMoreBtn.classList.remove('is-hidden');\n                loadMoreBtn.addEventListener('click', clickLoadMore);\n            }\n\n} catch(error){\nconsole.log(error);\n}   \n finally{\n    form.reset();\n    loader.classList.add('is-hidden');\n}\n}\n\n\n  form.addEventListener('submit', generalFunktion);\n    \n\n          \n           \n\n            const clickLoadMore  = async (event) => {\n                page++;\n                loader.classList.remove('is-hidden');\n                try{\n                    const response2 =  await fetchImages(searchQuery,page);\n                    loader.classList.add('is-hidden');\n                    const markup2 = response2.data.hits.map(el => galleryFn(el)).join('');\n                    ul.insertAdjacentHTML( 'beforeend', markup2);\n            \n                    const simplebox2 = new SimpleLightbox('.gallery a', {\n                        captionsData: \"alt\", // встановлює підпис\n                        captionDelay: 250, // встановлює затримку\n                        doubleTapZoom: 0, // вбирає зум з подвійним кліком\n                        maxZoom: 0, // вбирає зум\n                        scrollZoom: false, //вбирає скрол мишою\n                    });\n                    simplebox2.refresh();\n                    form.reset();\n\n                    if(page * 15 >= response2.data.totalHits){\n                        iziToast.info({\n                            message: \"We're sorry, but you've reached the end of search results.\",\n                            iconUrl: 'https://symbl-world.akamaized.net/i/webp/c1/d9d88630432cf61ad335df98ce37d6.webp',\n                            messageSize: '16',\n                            messageColor: 'white',\n                            backgroundColor: '#EF4040',\n                            position: 'topRight',\n                            width: '302',\n                            color: 'white',\n                        });\n                        loadMoreBtn.removeEventListener('click', clickLoadMore);\n                        loadMoreBtn.classList.add('is-hidden');\n                    }\n                    smoothScroll();\n        }\n            catch(error){\n                console.log(error);\n            }\n        };\n\n        const smoothScroll = () => {\n            const { height: cardHeight } = gallery.getBoundingClientRect();\n            window.scrollBy({\n              top: cardHeight * 2,\n              behavior: 'smooth',\n            });\n        }\n\n                   \n                         \n            // }\n            \n            // }\n                // if(!page > 0){\n                // return;\n                // }\n\n            // loadMoreBtn.classList.remove('is-hidden');\n            // loadMoreBtn.addEventListener('click', clickLoadMore);\n\n           \n            \n  \n\n    //     const card = document.querySelector('.gallery a');\n    //     const cardHeight = card.getBoundingClientRect();\n    //       window.scrollBy({\n    //         top: cardHeight,\n    //         behavior: \"smooth\",\n    //     });\n\n    //     } catch (err) {\n    //         console.log(err);\n    //       }\n    //     }\n\n       \n    //     form.reset();\n    //     gallery.innerHTML = '';\n    \n\n\n"],"names":["galleryFn","ImgInfo","fetchImages","searchQuery","currentPage","axiousParams","axios","form","input","loader","gallery","ul","loadMoreBtn","page","totalHits","generalFunktion","event","iziToast","response","markup","el","SimpleLightbox","clickLoadMore","error","response2","markup2","smoothScroll","cardHeight"],"mappings":"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"}