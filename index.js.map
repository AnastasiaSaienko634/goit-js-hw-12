{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-funktions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function fetchImages(searchQuery, currentPage){\n    const axiousParams = {\n        params: {\n            key: '47906574-737e3153d4e9e6f9b55134ae6',\n            q: searchQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: currentPage,\n        },\n    };\n     return axios.get('https://pixabay.com/api/',axiousParams);\n    }\n    \n\n\n","const gallery = document.querySelector('.gallery-js');\n\nexport function galleryFn (ImgInfo) {\n    \n    return `<li class=\"card\">\n    <a class=\"lagre-foto\" href=\"${ImgInfo.largeImageURL}\">\n    <img class=\"photo\" src='${ImgInfo.webformatURL}' alt='${ImgInfo.tags}' width='360' height='160'>\n    </a>\n    <div class=\"text\">\n    <p class=\"tags\">Likes<span class=\"positions\">${ImgInfo.likes}</span></p>\n    <p class=\"views\">Views<span class=\"positions\">${ImgInfo.views}</span></p>\n    <p class=\"comments\">Comments<span class=\"positions\">${ImgInfo.comments}</span></p>\n    <p class=\"downloads\">Downloads<span class=\"positions\">${ImgInfo.downloads}</span></p>\n    </div>\n    </li>`\n};\n\n\n","import \"izitoast/dist/css/iziToast.min.css\";\nimport iziToast from \"izitoast\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport {fetchImages} from './js/pixabay-api.js';\nimport { galleryFn } from './js/render-funktions.js';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector('.input-form');\nconst loader = document.querySelector('.loader');\nconst gallery =  document.querySelector('.gallery');\nconst galleryList = document.querySelector('.gallery-js');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet page = 1;\nlet searchQuery = '';\nlet totalHits = 0;\n\nconst simplebox = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\", // встановлює підпис\n    captionDelay: 250, // встановлює затримку\n    doubleTapZoom: 0, // вбирає зум з подвійним кліком\n    maxZoom: 0, // вбирає зум\n    scrollZoom: false, //вбирає скрол мишою\n});\n\n\nloadMoreBtn.classList.add('is-hidden');\n\n\nasync function generalFunktion (event) {\n\n    loadMoreBtn.classList.add('is-hidden');\n\n    loadMoreBtn.addEventListener('click', clickLoadMore);\n\n    page = 1;\n\n    try {\n        event.preventDefault();\n        searchQuery = input.value.trim();\n\n\n        if(searchQuery === '') {\n            iziToast.show({\n                message: 'Please fill in the field',\n                iconUrl: 'https://symbl-world.akamaized.net/i/webp/c1/d9d88630432cf61ad335df98ce37d6.webp',\n                messageSize: '16',\n                messageColor: 'white',\n                backgroundColor: '#EF4040',\n                position: 'topRight',\n                width: '302',\n                color: 'white',\n            });\n            gallery.innerHTML = '';\n            loader.classList.add('is-hidden');\n            loadMoreBtn.classList.add('is-hidden');\n            return;\n        }\n\n    loader.classList.remove('is-hidden');\n\n    const response = await fetchImages(searchQuery,page);\n\n    if(response.data.hits.length === 0){\n        loadMoreBtn.classList.add('is-hidden');\n        loader.classList.add('is-hidden');\n        iziToast.show({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            iconUrl: 'https://symbl-world.akamaized.net/i/webp/c1/d9d88630432cf61ad335df98ce37d6.webp',\n            messageSize: '16',\n            messageColor: 'white',\n            backgroundColor: '#EF4040',\n            position: 'topRight',\n            width: '302',\n            color: 'white',\n        });\n        gallery.innerHTML = '';\n        return;\n    }\n\n\n    totalHits = response.data.totalHits;\n    const markup = response.data.hits.map(el => galleryFn(el)).join('');\n    galleryList.innerHTML = markup;\n    loader.classList.add('is-hidden');\n    simplebox.refresh();\n\n    if(page * 15 >= response.data.totalHits){\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            iconUrl: 'https://symbl-world.akamaized.net/i/webp/c1/d9d88630432cf61ad335df98ce37d6.webp',\n            messageSize: '16',\n            messageColor: 'white',\n            backgroundColor: '#EF4040',\n            position: 'topRight',\n            width: '302',\n            color: 'white',\n        });\n        loadMoreBtn.classList.add('is-hidden');\n        return;\n    } else {\n        loadMoreBtn.classList.remove('is-hidden');\n    }\n\n    } catch(error){\n        console.log(error);\n        }   \n        finally{\n            form.reset();\n        }\n        };\n\n        form.addEventListener('submit', generalFunktion);  \n\n\n        async function clickLoadMore(event) {\n            loader.classList.remove('is-hidden');\n            page++;\n\n            try{\n                const response2 =  await fetchImages(searchQuery,page);\n                const markup2 = response2.data.hits.map(el => galleryFn(el)).join('');\n                galleryList.insertAdjacentHTML( 'beforeend', markup2);\n\n        \n                simplebox.refresh();\n                form.reset();\n\n            if(page * 15 >= response2.data.totalHits){\n                iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    iconUrl: 'https://symbl-world.akamaized.net/i/webp/c1/d9d88630432cf61ad335df98ce37d6.webp',\n                    messageSize: '16',\n                    messageColor: 'white',\n                    backgroundColor: '#EF4040',\n                    position: 'topRight',\n                    width: '302',\n                    color: 'white',\n                    });\n                        loadMoreBtn.classList.add('is-hidden');\n                    } else {\n                    loader.classList.remove('is-hidden');\n                        loadMoreBtn.addEventListener('click', clickLoadMore);\n                        smoothScroll();\n                    }\n                            }catch(error){\n                                console.log(error);\n                        }\n                    };\n\n            const smoothScroll = () => {\n                const galleryItem = document.querySelector('.gallery a');\n                    if(galleryItem){       \n                    const { height: cardHeight } = galleryItem.getBoundingClientRect();\n                    window.scrollBy({\n                    top: cardHeight * 2.5,\n                    behavior: 'smooth',\n                    });\n                 };\n        }\n                   \n                         \n           "],"names":["fetchImages","searchQuery","currentPage","axiousParams","axios","galleryFn","ImgInfo","form","input","loader","gallery","galleryList","loadMoreBtn","page","totalHits","simplebox","SimpleLightbox","generalFunktion","event","clickLoadMore","iziToast","response","markup","el","error","response2","markup2","smoothScroll","galleryItem","cardHeight"],"mappings":"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"}